<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link rel="icon" type="image/png" href="../favicon.ico">
    <title>Commands</title>
    
    

    
    <link rel="stylesheet" href="../style.min.css">

    

    <meta name="generator" content="Hugo 0.68.3" />
</head>
<body>

<div class="columns container is-marginless">
    <div id="sidebar" class="column is-one-quarter">
        <div class="brand">
    <a href="https://mitmproxy.org/">
        <img src='../logo-docs.png' alt="mitmproxy docs"/>
    </a>

</div>
<nav class="menu">
    <p class="menu-label">Overview</p>
    <ul class="menu-list">
    
    
    
    
        <li >
            <a class=""
                href="../">Introduction</a>
        </li>
    
        <li >
            <a class=""
                href="../overview-installation/">Installation</a>
        </li>
    
        <li >
            <a class=""
                href="../overview-getting-started/">Getting Started</a>
        </li>
    
</ul>

    <p class="menu-label">Beginner Tutorial</p>
    <ul class="menu-list">
    
    
    
    
        <li >
            <a class=""
                href="../mitmproxytutorial-userinterface/">User Interface</a>
        </li>
    
        <li >
            <a class=""
                href="../mitmproxytutorial-interceptrequests/">Intercept Requests</a>
        </li>
    
        <li >
            <a class=""
                href="../mitmproxytutorial-modifyrequests/">Modify Requests</a>
        </li>
    
        <li >
            <a class=""
                href="../mitmproxytutorial-replayrequests/">Replay Requests</a>
        </li>
    
        <li >
            <a class=""
                href="../mitmproxytutorial-whatsnext/">What&#39;s Next</a>
        </li>
    
</ul>

    <p class="menu-label">Core concepts</p>
    <ul class="menu-list">
    
    
    
    
        <li >
            <a class=""
                href="../concepts-howmitmproxyworks/">How mitmproxy works</a>
        </li>
    
        <li >
            <a class=""
                href="../concepts-modes/">Modes of operation</a>
        </li>
    
        <li >
            <a class=""
                href="../concepts-certificates/">Certificates</a>
        </li>
    
        <li >
            <a class=""
                href="../overview-features/">Features</a>
        </li>
    
        <li >
            <a class=""
                href="../concepts-filters/">Filter expressions</a>
        </li>
    
        <li >
            <a class=""
                href="../concepts-options/">Options</a>
        </li>
    
        <li >
            <a class="is-active"
                href="../concepts-commands/">Commands</a>
        </li>
    
        <li >
            <a class=""
                href="../concepts-protocols/">Protocols</a>
        </li>
    
</ul>

    <p class="menu-label"> Addon Development </p>
    <ul class="menu-list">
    
    
    
    
        <li >
            <a class=""
                href="../addons-overview/">Addons</a>
        </li>
    
        <li >
            <a class=""
                href="../addons-events/">Events</a>
        </li>
    
        <li >
            <a class=""
                href="../addons-options/">Options</a>
        </li>
    
        <li >
            <a class=""
                href="../addons-commands/">Commands</a>
        </li>
    
        <li >
            <a class=""
                href="../addons-scripting/">Scripting</a>
        </li>
    
        <li >
            <a class=""
                href="../addons-examples/">Example Addons</a>
        </li>
    
</ul>

    <p class="menu-label"> HOWTOs </p>
    <ul class="menu-list">
    
    
    
    
        <li >
            <a class=""
                href="../howto-kubernetes/">Kubernetes Services</a>
        </li>
    
        <li >
            <a class=""
                href="../howto-transparent/">Transparent Proxying</a>
        </li>
    
        <li >
            <a class=""
                href="../howto-wireshark-tls/">Wireshark and SSL/TLS</a>
        </li>
    
        <li >
            <a class=""
                href="../howto-ignoredomains/">Ignoring Domains</a>
        </li>
    
        <li >
            <a class=""
                href="../howto-transparent-vms/">Transparently Proxying VMs</a>
        </li>
    
        <li >
            <a class=""
                href="../howto-install-system-trusted-ca-android/">Install System CA on Android</a>
        </li>
    
</ul>

    <p class="menu-label"> Tutorials </p>
    <ul class="menu-list">
    
    
    
    
        <li >
            <a class=""
                href="../tute-clientreplay/">Client replay</a>
        </li>
    
        <li >
            <a class=""
                href="../tute-highscores/">Setting highscores on Apple GameCenter</a>
        </li>
    
</ul>
</nav>

    </div>
    <div id="main" class="column content">
        
        
<a class="button is-small is-outlined is-link is-pulled-right"
   target="_blank"
   href="https://github.com/mitmproxy/mitmproxy/blob/master/docs/src/content/concepts-commands.md"
>
    Edit on GitHub
</a>



        <h1 id="commands"><a class="anchor" href="#commands">#&nbsp;&nbsp;</a>Commands</h1>
<p>Commands are the mechanism that allows users to actively interact with addons.
Perhaps the most prominent example of this is the mitmproxy console user
interface - every interaction in this tool consists of commands bound to keys.
Commands also form a flexible and very powerful way to interact with mitmproxy
from the command prompt. In mitmproxy console you can enter the command prompt
with the <code>:</code> key. The prompt has intelligent tab completion for command names
and many of the built-in argument types - give it a try.</p>
<p>The canonical reference for commands is the <code>--commands</code> flag, which is exposed
by each of the mitmproxy tools. Passing this flag will dump an annotated list of
all registered commands, their arguments and their return values to screen. In
mimtproxy console you can also view a palette of all commands in the command
browser (by default accessible with the <code>C</code> key binding).</p>
<h1 id="working-with-flows"><a class="anchor" href="#working-with-flows">#&nbsp;&nbsp;</a>Working with Flows</h1>
<p>Many of mitmproxy&rsquo;s commands take flows as arguments. For instance, the
signature for the client replay commands looks like this:</p>
<pre><code>replay.client [flow]
</code></pre><p>That means that it expects a sequence of one or more flows. This is where <a href="../concepts-filters/">flow
specifications</a> come in - mitmproxy will
intelligently expand a flexible flow selection language to a list of flows when
invoking commands.</p>
<p>Fire up mitmproxy console, and intercept some traffic so we have flows to work
with. Now type the following command:</p>
<pre><code>:replay.client @focus
</code></pre><p>Make sure you try using tab completion for the command name and the flow
specification. The <code>@focus</code> specifiers expands to the currently focused flow, so
you should see this flow replay. However, replay can take any number of flows.
Try the following command:</p>
<pre><code>:replay.client @all
</code></pre><p>Now you should see all flows replay one by one. We have the full power of the
mitmproxy filter language at our disposal here, so we could also, for example,
just replay flows for a specific domain:</p>
<pre><code>:replay.client &quot;~d google.com&quot;
</code></pre><h1 id="custom-key-bindings"><a class="anchor" href="#custom-key-bindings">#&nbsp;&nbsp;</a>Custom Key Bindings</h1>
<p>Mitmproxy&rsquo;s key bindings can be customized to your needs in the
<code>~/.mitmproxy/keys.yaml</code> file. This file consists of a sequence of maps, with
the following keys:</p>
<ul>
<li><code>key</code> (<strong>mandatory</strong>): The key to bind.</li>
<li><code>cmd</code> (<strong>mandatory</strong>): The command to execute when the key is pressed.</li>
<li><code>context</code>: A list of contexts in which the key should be bound. By default this is <strong>global</strong> (i.e. the key is bound everywhere). Valid contexts are <code>chooser</code>, <code>commands</code>, <code>dataviewer</code>, <code>eventlog</code>, <code>flowlist</code>, <code>flowview</code>, <code>global</code>, <code>grideditor</code>, <code>help</code>, <code>keybindings</code>, <code>options</code>.</li>
<li><code>help</code>: A help string for the binding which will be shown in the key binding browser.</li>
</ul>
<h4 id="example"><a class="anchor" href="#example">#&nbsp;&nbsp;</a>Example</h4>
<div class="example">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#e6db74">-
</span><span style="color:#e6db74">  # Simple global binding</span>
  <span style="color:#66d9ef">key</span>: ctrl a
  <span style="color:#66d9ef">cmd</span>: replay.client @marked
<span style="color:#e6db74">-
</span><span style="color:#e6db74">  # Bind key only in the flowlist</span>
  <span style="color:#75715e"># Note that 1 is quoted, or YAML interprets it as a digit</span>
  <span style="color:#66d9ef">key</span>: <span style="color:#e6db74">&#34;1&#34;</span>
  <span style="color:#66d9ef">ctx</span>: [<span style="color:#e6db74">&#34;flowlist&#34;</span>]
  <span style="color:#66d9ef">cmd</span>: console.nav.down
  <span style="color:#66d9ef">help</span>: Go to next flow</code></pre></div>
<div class="path">examples/keys.yaml</div>
</div>



    </div>
</div>
</body>
</html>

